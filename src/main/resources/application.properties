

spring.profiles.active=${APP_PROFILE:dev}

spring.application.name=inventory-sync

spring.jpa.open-in-view=false


security.client-id=${CLIENT_ID:myclientid}
security.client-secret=${CLIENT_SECRET:myclientsecret}
security.jwt.duration=${JWT_DURATION:86400}

cors.origins=${CORS_ORIGINS:http://localhost:3000,http://localhost:8000,http://localhost:5173}

pagbrasil.secret=${PAGBRASIL_SECRET}
pagbrasil.url=${PAGBRASIL_URL}
pagbrasil.token=${PAGBRASIL_TOKEN}
pagbrasil.hmac.key=${PAGBRASIL_HMAC_MD5_KEY}

shopify.api.token=${SHOPIFY_ACCESS_TOKEN_DOGMA}
shopify.api.version=${SHOPIFY_API_VERSION_DOGMA}
shopify.store.url=${SHOPIFY_STORE_URL_DOGMA}


pagbrasil.api.delay=${PAGBRASIL_API_DELAY:500}


# Configuração de idempotência para webhooks
# TTL conservador: 30 dias (cobre reenvios manuais da PagBrasil)
webhook.idempotency.ttl.hours=${WEBHOOK_IDEMPOTENCY_TTL_HOURS:720}

# Estratégia de limpeza: conservative (só remove jobs DONE) ou aggressive (remove por tempo)
webhook.idempotency.cleanup.strategy=${WEBHOOK_IDEMPOTENCY_CLEANUP_STRATEGY:conservative}

# Configuração de processamento de jobs
webhook.job.max.attempts=${WEBHOOK_JOB_MAX_ATTEMPTS:5}


# Intervalo de processamento (em millisegundos)
# Para testes: 30000 (30 segundos)
# Para produção: 600000 (10 minutos)
webhook.job.processing.interval=${WEBHOOK_JOB_PROCESSING_INTERVAL:30000}

# Revenue cache job configuration
# Cron expression: runs once per day at 2 AM (to avoid rate limiting)
# Format: second minute hour day month weekday
revenue.cache.schedule.cron=${REVENUE_CACHE_SCHEDULE_CRON:0 0 2 * * *}

# Number of parallel requests when fetching subscriptions from PagBrasil
# IMPORTANT: Keep low to avoid rate limiting (max 5 recommended)
revenue.cache.parallel.batch.size=${REVENUE_CACHE_PARALLEL_BATCH_SIZE:5}

# Delay between individual subscription requests (milliseconds)
pagbrasil.request.delay=${PAGBRASIL_REQUEST_DELAY:200}

# Delay between status listing requests (milliseconds)
pagbrasil.status.delay=${PAGBRASIL_STATUS_DELAY:500}

# Enable/disable revenue cache scheduled job
revenue.cache.enabled=${REVENUE_CACHE_ENABLED:true}


